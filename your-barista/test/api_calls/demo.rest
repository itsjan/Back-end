### REQUEST A NEW MEMBERSHIP
### 
POST http://localhost:3005/memberships
Content-Type: application/json

{
    "member_name" : "GABY"
}

###
POST http://localhost:3005/memberships
Content-Type: application/json

{
    "member_name" : ""
}

###

HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 436
ETag: W/"1b4-PKnQBfPrW+NGNC9FEuNxvWbsXbA"
Date: Tue, 15 Dec 2020 13:50:01 GMT
Connection: close

{
  "data": {
    "redemptions": [],
    "_id": "5fd8bf08a1df8118b5e6d666",
    "member_name": "GABY",
    "valid_until": "2021-01-14T13:50:00.995Z",
    "qr_code_value": "e177ad5d-978f-40e3-b99f-87bac5b1449b",
    "__v": 0,
    "is_valid": true,
    "number_of_redemptions_today": 0,
    "minutes_since_last_redemption": null,
    "can_redeem": true,
    "qr_code_url": "https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=e177ad5d-978f-40e3-b99f-87bac5b1449b",
    "id": "5fd8bf08a1df8118b5e6d666"
  }
}

### Fabian
HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 437
ETag: W/"1b5-nBYqpZIya8Q8x4kkNbbTXqVDNCE"
Date: Tue, 15 Dec 2020 14:06:36 GMT
Connection: close

{
  "data": {
    "redemptions": [],
    "_id": "5fd8c2ec15b6c319ece37d17",
    "member_name": "FABIAN",
    "valid_until": "2021-01-14T14:06:36.416Z",
    "qr_code_value": "57e39850-abf1-401a-bbf9-4a6bd684eb4d",
    "__v": 0,
    "is_valid": true,
    "number_of_redemptions_today": 0,
    "minutes_since_last_redemption": null,
    "can_redeem": true,
    "qr_code_url": "https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=57e39850-abf1-401a-bbf9-4a6bd684eb4d",
    "id": "5fd8c2ec15b6c319ece37d17"
  }
}

#GABY

HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 435
ETag: W/"1b3-m393wmblNFA4qzw1wS67UeSiG8Y"
Date: Tue, 15 Dec 2020 14:09:08 GMT
Connection: close

{
  "data": {
    "redemptions": [],
    "_id": "5fd8c3846df8bd1a1f2aac0b",
    "member_name": "GABY",
    "valid_until": "2021-01-14T14:09:08.105Z",
    "qr_code_value": "5737620d-cd67-48d3-93de-c64ecb10a7e0",
    "__v": 0,
    "is_valid": true,
    "number_of_redemptions_today": 0,
    "minutes_since_last_redemption": null,
    "can_redeem": true,
    "qr_code_url": "https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=5737620d-cd67-48d3-93de-c64ecb10a7e0",
    "id": "5fd8c3846df8bd1a1f2aac0b"
  }
}


### CREATE AN ORDER FOR A DRINK
POST http://localhost:3005/orders
Content-Type: application/json

{
    "drink" : "CAFE MOCCA"
}

###
### CREATE AN ORDER FOR A DRINK
POST http://localhost:3005/orders
Content-Type: application/json

{
  
}

###

HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 175
ETag: W/"af-BcCjmlEo5BputT/cIOynW2cgj6c"
Date: Tue, 15 Dec 2020 13:50:35 GMT
Connection: close

{
  "data": {
    "_id": "5fd8bf2ba1df8118b5e6d667",
    "drink": "CAFE MOCCA",
    "createdTime": "2020-12-15T13:50:35.236Z",
    "__v": 0,
    "is_redeemed": false,
    "id": "5fd8bf2ba1df8118b5e6d667"
  }
}

HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 179
ETag: W/"b3-aN39cV3XeZLneLglbiQZkOKAYO4"
Date: Tue, 15 Dec 2020 13:58:16 GMT
Connection: close

{
  "data": {
    "_id": "5fd8c0f8a3d17e192e382b97",
    "drink": "CAFE MOCCA for Elias (2)",
    "createdTime": "2020-12-15T13:58:16.247Z",
    "__v": 0,
    "is_redeemed": false,
    "id": "5fd8c0f8a3d17e192e382b97"
  }
}

HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 174
ETag: W/"ae-dz4Oryg65+Xkk5GIekp/8fkaQ7M"
Date: Tue, 15 Dec 2020 14:09:35 GMT
Connection: close

{
  "data": {
    "_id": "5fd8c39f6df8bd1a1f2aac0c",
    "drink": "CAFE MOCCA for GABY",
    "createdTime": "2020-12-15T14:09:35.546Z",
    "__v": 0,
    "is_redeemed": false,
    "id": "5fd8c39f6df8bd1a1f2aac0c"
  }
}

### REDEEM COFFEE ORDER USING A VALID MEMBERSHIP
GET http://localhost:3005/orders/5fd8c426d38a751a445f4865/redemption/5737620d-cd67-48d3-93de-c64ecb10a7e0

### REDEEM COFFEE ORDER USING A VALID MEMBERSHIP
POST http://localhost:3005/orders/5fd8c426d38a751a445f4865/redemption/
Content-Type: application/json

{
  "membership_qr_code" : "J"
}

### SUCCESS
HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 432
ETag: W/"1b0-N6o+oputa/tu+le2iNfRiS8RGzs"
Date: Tue, 15 Dec 2020 13:56:50 GMT
Connection: close

{
  "message": "Order successfully redeemed",
  "order": {
    "_id": "5fd8bf2ba1df8118b5e6d667",
    "drink": "CAFE MOCCA for Elias",
    "createdTime": "2020-12-15T13:50:35.236Z",
    "__v": 0,
    "redemption": {
      "_id": "5fd8c0a2a3d17e192e382b95",
      "time": "2020-12-15T13:56:50.918Z",
      "order_id": "5fd8bf2ba1df8118b5e6d667",
      "__v": 0
    },
    "redeemed_by_member_name": "ELIAS",
    "redeemed_by_membership_id": "5fd8bf08a1df8118b5e6d666",
    "is_redeemed": true,
    "id": "5fd8bf2ba1df8118b5e6d667"
  }
}

### ERROR - Order already redeemed

HTTP/1.1 409 Conflict
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 74
ETag: W/"4a-TQ7vc7CRzI6DNuH0ZPEL40YYFac"
Date: Tue, 15 Dec 2020 13:57:15 GMT
Connection: close

{
  "message": "Order is already redeemed and cannot be redeemed more times!"
}

### ERROR - Too many redemptions
HTTP/1.1 403 Forbidden
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 713
ETag: W/"2c9-aP3pwiBQwInQVS91CCmmTK4DL70"
Date: Tue, 15 Dec 2020 13:58:52 GMT
Connection: close

{
  "message": "Member is not allowed to redeem a drink at this time. Only 1 drink is allowed every 30 minutes, and up to 5 times per day. Please try again later.",
  "membership": {
    "redemptions": [
      {
        "_id": "5fd8c0a2a3d17e192e382b95",
        "time": "2020-12-15T13:56:50.918Z",
        "order_id": "5fd8bf2ba1df8118b5e6d667",
        "__v": 0
      }
    ],
    "_id": "5fd8bf08a1df8118b5e6d666",
    "member_name": "ELIAS",
    "valid_until": "2021-01-14T13:50:00.995Z",
    "qr_code_value": "e177ad5d-978f-40e3-b99f-87bac5b1449b",
    "__v": 1,
    "is_valid": true,
    "number_of_redemptions_today": 1,
    "minutes_since_last_redemption": 2,
    "can_redeem": false,
    "qr_code_url": "https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=e177ad5d-978f-40e3-b99f-87bac5b1449b",
    "id": "5fd8bf08a1df8118b5e6d666"
  }
}